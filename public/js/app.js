!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){r(1),e.exports=r(2)},function(e,t){var r=angular.module("items",["ngRoute"]).constant("API_URL","/api/");r.config(function(e){e.when("/",{controller:"itemsListController",templateUrl:"../templates/list.html"}).when("/edit/:itemId",{controller:"itemDetailController",templateUrl:"../templates/detail.html"}).when("/new",{controller:"itemDetailController",templateUrl:"../templates/detail.html"}).otherwise({redirectTo:"/"})}),r.config(["$locationProvider",function(e){e.hashPrefix("")}]),r.config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]),r.filter("startFrom",function(){return function(e,t){if(e&&e.length)return t=+t,e.slice(t)}}),r.controller("itemsListController",function(e,t,r,n){t.get(r+"items").then(function(t){e.items=t.data,e.sortType="id",e.sortReverse=!1,e.filterItems=e.items,e.currentPage=0,e.itemsPerPage=5,e.search="",e.toggleSort=function(t){e.sortType=angular.element(t.currentTarget).attr("data-sort"),e.sortReverse=!e.sortReverse,angular.element(document.querySelectorAll(".sort")).removeClass("asc desc"),angular.element(t.currentTarget).addClass(["asc","desc"][+e.sortReverse]).removeClass(["asc","desc"][+!e.sortReverse]),e.filterItems=n("orderBy")(e.items,e.sortType,e.sortReverse)},e.firstPage=function(){return 0==e.currentPage},e.lastPage=function(){var t=Math.ceil(e.filterItems.length/e.itemsPerPage-1);return e.currentPage==t},e.getFilterItems=function(){return n("filter")(e.filterItems,e.search)},e.numberOfPages=function(){return Math.ceil(e.getFilterItems().length/e.itemsPerPage)},e.startingItem=function(){return e.currentPage*e.itemsPerPage},e.pageBack=function(){e.currentPage=e.currentPage-1},e.pageForward=function(){e.currentPage=e.currentPage+1},e.$watch("search",function(t,r){r!=t&&(e.currentPage=0,e.filterItems=n("filter")(e.items,e.search))},!0),componentHandler.upgradeAllRegistered()})}),r.controller("itemDetailController",function(e,t,r,n,i,o){function a(){var e=f.value,t=void 0;e.lastIndexOf("\\")?t=e.lastIndexOf("\\")+1:e.lastIndexOf("/")&&(t=e.lastIndexOf("/")+1),d.value=e.slice(t,e.length)}function l(){0!=d.value.length?u.classList.contains("is-focused")||u.classList.add("is-focused"):u.classList.contains("is-focused")&&u.classList.remove("is-focused")}var s=i.itemId,c="";c=s?n+"items/"+s:n+"items",t.get(c).then(function(t){e.item=t.data}),e.save=function(){var r=new FormData,n=f.files[0];r.append("image",n),r.append("title",e.item.title),r.append("price",parseFloat(e.item)||0),r.append("description",e.item.description||""),t.post(c,r,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){o.path("/")})},e.delete=function(){confirm("Уверены?")&&t({method:"DELETE",url:c}).then(function(e){o.path("/")})},e.checkDirty=function(){var e=document.querySelectorAll(".mdl-textfield");Array.prototype.forEach.call(e,function(e){e.MaterialTextfield.checkDirty()})};var u=document.getElementById("file-input-text-div"),f=document.getElementById("file-input-file"),d=document.getElementById("file-input-text");f.addEventListener("change",a),f.addEventListener("change",l),componentHandler.upgradeAllRegistered()})},function(e,t){}]);